
My Todos
     

Handle end of recording
Link the start record command to the record button on controller
make recording mode be startable from script
                            
Improve Avatar
    Legs should make Footsteps
    Hands should not detach from arms
    Collisions between avatar and furniture?
         
Change Gloves?

Initial Scene Description wrt logical predicates?

save stuff in json format?
use relevant predicates from visual genome dataset
json_dataset, predicates: ["on", "wear", "has", "next to", "sleep next to", "sit next to", "stand next to", "park next", "walk next to", "above", "behind", "stand behind", "sit behind", "park behind", "in the front of", "under", "stand under", "sit under", "near", "walk to", "walk", "walk past", "in", "below", "beside", "walk beside", "over", "hold", "by", "beneath", "with", "on the top of", "on the left of", "on the right of", "sit on", "ride", "carry", "look", "stand on", "use", "at", "attach to", "cover", "touch", "watch", "against", "inside", "adjacent to", "across", "contain", "drive", "drive on", "taller than", "eat", "park on", "lying on", "pull", "talk", "lean on", "fly", "face", "play with", "sleep on", "outside of", "rest on", "follow", "hit", "feed", "kick", "skate on"]

filtered predicates:
["on", "wear", "has", "next to", "stand next to", "walk next to", "above", "behind", "stand behind",  "in the front of", "under", "stand under", "near", "walk to", "walk", "walk past", "in", "below", "beside", "walk beside", "over", "hold", "by", "beneath", "with", "on the top of", "on the left of", "on the right of", "carry", "look", "stand on", "use", "at", "attach to", "cover", "touch", "watch", "against", "inside", "adjacent to", "across", "contain", "taller than", "eat", "lying on", "pull", "talk", "lean on", "fly", "face", "play with", "outside of", "rest on", "follow", "hit", "feed", "kick"]

further filter:
["on", "next to", "above", "behind", "in the front of", "under", "walk", "in", "below", "beside", "hold", "on the top of", "on the left of", "on the right of", "carry", "use", "cover", "touch", "contain", "eat", "pull"]

further filter:
["on", "next to", "in", "walk", "hold", "use", "cover", "touch", "eat"]

ROGER:
on, above, in, cutting, holding, moving
cutting: read the cuts replay file --DONE
holding: record when hands grasp action is used --DONE
moving: compare last frame to current frame. if position and rot diff > threshold then object is moving. use recording file

mit script cupboard predicates:
ontriggerenter/exit erfasst prädikat "in"
im ersten frame werden anscheinen auch alle enters getriggered, die bereits in den kästen sind. damit kann man vllcht den initial state erfassen
cupboard predicates müssen noch auf andere kästen gegeben weren (im prefab!)
auch auf pfannen und töpfe?
schauen, ob alle game objects mit objectid auch einen collider haben, damit InPredicate triggern kann --> wine glass und andere objects, die mit dem "colliders" script concave colliders machen zb.


make grasping more intuitive: 
highlight currently selected object (like it was before), but only make it visible for the ego perspective
,m
start and stop the recording and playback via function call and not via start/awake/update

in recording mode: stockt, wenn die json files geschrieben werden.
--> schreibe json files, wenn in playback mode?

Aus bildern videos machen

Bug: Schranktüren können beim ersten mal nur über den handgriffcollider bewegt werden, danach aber über die ganze schranktür

Release mode statt Debug mode!

obj w colliders register when on top of containers 

in topcabinet:
--> todo ghosts sizes and positions checken
coffee_machine_ghost

potato, bun_1 disappears when being cut

https://deparkes.co.uk/2018/01/05/create-video-images-ffmpeg/
cmd to screenshots, where the ffmpeg.exe file is too, then:
ffmpeg -framerate 30 -i rgb-%d.jpg -codec copy video.avi
download ffmpeg from https://www.gyan.dev/ffmpeg/builds/
link from: http://ffmpeg.org/download.html#build-windows

use the recorded deltatime in the replay files to calculate when to take pictures in the record mode s.t. the image is in the correct speed and actually smooth
but then: recording files numbers wont match the video sequence numbers...

all concave collider objects must be set up like saucepan_big_1

test on other env: 
Relay Policy Learning: Solving Long-Horizon Tasksvia Imitation and Reinforcement Learning by Gupta '19
kitchen env with robot arm

some objects in top cabinet have 2 ghosts?

pot_1: transform is falling down along y axis (but the actual visible go is colliding correctly with floor)
also, the ghost is too high after the first grasp

check all objects in scene that are somehow nested --> is objectid on correct object etc.
e.g. milk?

do a test recipe........

put all video, pictures, objectposition scripts etc in the right sample folder
translate objectposition into json

todo get mpii2 cooking dataset stuff from work
and then turn on "displayrecipe" script again

test bounding boxes in json on video files 

make better workflow:
start and stop recording in play mode via button
give options for replay: immediate after record finish or batch mode for all samples in a dir?
create video after replay
scene restart necessary when change between record and render mode?

avatar kopf verrückt --> in cmu compliant skeleton den Head transform aus origin setzen

initial scene into owl file for protege? eigentlich nicht. Dynamische infos werden ja eigentlich in die problem instance geschrieben.
es sollte frame 1 der jeweiligen prädikat-recordings benutzt werden können um alle anfangsprädikate für das planning problem bereitstellen zu können.


Predicate problems:
- multiple entries for in and on
- repeated entered/left within a frame / across multiple frames
- in: cabinet can be in bowl. should not be possible
    -- objects with concave colliders make problems. 

------------------------------------
Workflow during recording
------------------------------------

- start executable
- show status for vr equipment
- start scene, prompt to choose recipe
- choose recipe
- start recording
- perform recipe following the instructions on display
- stop recording
- choose render now or later
- choose exit or new recipe
- if new recipe reset kitchen
